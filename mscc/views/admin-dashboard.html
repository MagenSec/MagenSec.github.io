<!-- MagenSec Command Center - Site Admin Dashboard (CISO View) -->
<div id="admin-dashboard" class="dashboard-view" data-view-section="admin">
    
    <!-- Welcome Section -->
    <div class="page-header">
        <h1 class="page-title">CISO Command Center</h1>
        <p class="page-subtitle">Enterprise security oversight and global threat intelligence</p>
        <div class="page-actions">
            <button id="security-briefing-btn" class="btn btn-primary">
                <span class="btn-icon">üìã</span>
                Security Briefing
            </button>
            <button id="threat-intel-btn" class="btn btn-secondary">
                <span class="btn-icon">üéØ</span>
                Threat Intel
            </button>
            <button id="admin-settings-btn" class="btn btn-secondary">
                <span class="btn-icon">‚öôÔ∏è</span>
                Admin Settings
            </button>
        </div>
    </div>

    <!-- Executive KPI Dashboard -->
    <div class="grid grid-cols-6 mb-8">
        <div class="card">
            <div class="card-content text-center">
                <div class="metric-value info" id="total-organizations">0</div>
                <div class="metric-label">Organizations</div>
            </div>
        </div>
        <div class="card">
            <div class="card-content text-center">
                <div class="metric-value info" id="total-users">0</div>
                <div class="metric-label">Total Users</div>
            </div>
        </div>
        <div class="card">
            <div class="card-content text-center">
                <div class="metric-value info" id="total-devices">0</div>
                <div class="metric-label">Managed Devices</div>
            </div>
        </div>
        <div class="card">
            <div class="card-content text-center">
                <div class="metric-value success" id="secure-orgs">0</div>
                <div class="metric-label">Secure Orgs</div>
            </div>
        </div>
        <div class="card">
            <div class="card-content text-center">
                <div class="metric-value danger" id="critical-alerts">0</div>
                <div class="metric-label">Critical Alerts</div>
            </div>
        </div>
        <div class="card">
            <div class="card-content text-center">
                <div class="metric-value" id="platform-health">99.9%</div>
                <div class="metric-label">Platform Health</div>
            </div>
        </div>
    </div>

    <!-- CISO Dashboard Grid -->
    <div class="dashboard-grid grid-large">
        
        <!-- Global Threat Landscape -->
        <div class="widget chart-widget" style="grid-column: span 2;">
            <div class="widget-header">
                <h3 class="widget-title">Global Threat Landscape</h3>
                <div class="flex gap-2">
                    <select id="threat-timeframe" class="form-select" style="width: auto;">
                        <option value="24h">Last 24 Hours</option>
                        <option value="7d" selected>Last 7 Days</option>
                        <option value="30d">Last 30 Days</option>
                    </select>
                    <button class="widget-action" onclick="window.dashboardManager.refreshThreatLandscape()">
                        <span>üîÑ</span>
                    </button>
                </div>
            </div>
            <div class="widget-content">
                <div class="chart-container">
                    <canvas id="global-threat-chart"></canvas>
                </div>
                <div class="grid grid-cols-4 gap-4 mt-4">
                    <div class="text-center">
                        <div class="metric-value danger" id="malware-detections">1,247</div>
                        <div class="metric-label">Malware</div>
                    </div>
                    <div class="text-center">
                        <div class="metric-value warning" id="phishing-attempts">892</div>
                        <div class="metric-label">Phishing</div>
                    </div>
                    <div class="text-center">
                        <div class="metric-value info" id="vuln-exploits">156</div>
                        <div class="metric-label">Exploits</div>
                    </div>
                    <div class="text-center">
                        <div class="metric-value success" id="threats-blocked">2,295</div>
                        <div class="metric-label">Blocked</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Organization Security Matrix -->
        <div class="widget">
            <div class="widget-header">
                <h3 class="widget-title">Organization Security Matrix</h3>
                <button class="widget-action" onclick="window.dashboardManager.exportSecurityMatrix()">
                    <span>üìä</span>
                </button>
            </div>
            <div class="widget-content">
                <div id="organization-matrix">
                    <div class="space-y-2">
                        <div class="flex items-center justify-between p-2 border rounded">
                            <div class="flex items-center gap-3">
                                <span class="status-dot green"></span>
                                <div>
                                    <div class="font-medium">TechStart Inc.</div>
                                    <div class="text-sm text-gray-600">52 devices ‚Ä¢ 12 users</div>
                                </div>
                            </div>
                            <div class="flex gap-2">
                                <span class="badge badge-success">95%</span>
                                <span class="text-sm">Compliant</span>
                            </div>
                        </div>
                        <div class="flex items-center justify-between p-2 border rounded">
                            <div class="flex items-center gap-3">
                                <span class="status-dot yellow"></span>
                                <div>
                                    <div class="font-medium">Digital Solutions LLC</div>
                                    <div class="text-sm text-gray-600">28 devices ‚Ä¢ 8 users</div>
                                </div>
                            </div>
                            <div class="flex gap-2">
                                <span class="badge badge-warning">78%</span>
                                <span class="text-sm">At Risk</span>
                            </div>
                        </div>
                        <div class="flex items-center justify-between p-2 border rounded">
                            <div class="flex items-center gap-3">
                                <span class="status-dot green"></span>
                                <div>
                                    <div class="font-medium">SmartHome Solutions</div>
                                    <div class="text-sm text-gray-600">15 devices ‚Ä¢ 4 users</div>
                                </div>
                            </div>
                            <div class="flex gap-2">
                                <span class="badge badge-success">92%</span>
                                <span class="text-sm">Compliant</span>
                            </div>
                        </div>
                        <div class="flex items-center justify-between p-2 border rounded">
                            <div class="flex items-center gap-3">
                                <span class="status-dot red"></span>
                                <div>
                                    <div class="font-medium">Creative Agency Co.</div>
                                    <div class="text-sm text-gray-600">41 devices ‚Ä¢ 18 users</div>
                                </div>
                            </div>
                            <div class="flex gap-2">
                                <span class="badge badge-danger">62%</span>
                                <span class="text-sm">Critical</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="widget-footer">
                <a href="#" onclick="window.dashboardManager.showAllOrganizations()" class="text-primary">View all organizations ‚Üí</a>
            </div>
        </div>

        <!-- Platform Performance -->
        <div class="widget chart-widget">
            <div class="widget-header">
                <h3 class="widget-title">Platform Performance</h3>
                <span class="badge badge-success">Healthy</span>
            </div>
            <div class="widget-content">
                <div class="chart-container">
                    <canvas id="platform-performance-chart"></canvas>
                </div>
                <div class="grid grid-cols-3 gap-4 mt-4">
                    <div class="text-center">
                        <div class="metric-value success">99.9%</div>
                        <div class="metric-label">Uptime</div>
                    </div>
                    <div class="text-center">
                        <div class="metric-value info">245ms</div>
                        <div class="metric-label">Avg Response</div>
                    </div>
                    <div class="text-center">
                        <div class="metric-value warning">1.2M</div>
                        <div class="metric-label">Daily Requests</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Critical Security Incidents -->
        <div class="widget">
            <div class="widget-header">
                <h3 class="widget-title">Critical Security Incidents</h3>
                <span class="badge badge-danger" id="critical-incident-count">3</span>
            </div>
            <div class="widget-content">
                <div id="critical-incidents" class="activity-feed">
                    <div class="activity-item">
                        <div class="activity-icon danger">üö®</div>
                        <div class="activity-content">
                            <div class="activity-title">Advanced Persistent Threat Detected</div>
                            <div class="activity-description">Suspicious lateral movement detected across Creative Agency Co. network</div>
                            <div class="activity-time">15 minutes ago</div>
                        </div>
                    </div>
                    <div class="activity-item">
                        <div class="activity-icon warning">‚ö†Ô∏è</div>
                        <div class="activity-content">
                            <div class="activity-title">Zero-Day Vulnerability Alert</div>
                            <div class="activity-description">CVE-2024-1234 affects 156 devices across 12 organizations</div>
                            <div class="activity-time">2 hours ago</div>
                        </div>
                    </div>
                    <div class="activity-item">
                        <div class="activity-icon danger">üîì</div>
                        <div class="activity-content">
                            <div class="activity-title">Credential Compromise</div>
                            <div class="activity-description">Admin credentials potentially compromised at Digital Solutions LLC</div>
                            <div class="activity-time">4 hours ago</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="widget-footer">
                <a href="#" onclick="window.dashboardManager.showIncidentResponse()" class="text-primary">Launch incident response ‚Üí</a>
            </div>
        </div>

        <!-- Compliance & Risk Management -->
        <div class="widget">
            <div class="widget-header">
                <h3 class="widget-title">Enterprise Compliance</h3>
                <button class="widget-action" onclick="window.dashboardManager.generateComplianceReport()">
                    <span>üìã</span>
                </button>
            </div>
            <div class="widget-content">
                <div id="enterprise-compliance">
                    <div class="space-y-3">
                        <div class="progress-item">
                            <div class="progress-label">SOC 2 Type II</div>
                            <div class="progress-value">96%</div>
                            <div class="progress-bar">
                                <div class="progress-bar-fill success" style="width: 96%"></div>
                            </div>
                        </div>
                        <div class="progress-item">
                            <div class="progress-label">ISO 27001</div>
                            <div class="progress-value">91%</div>
                            <div class="progress-bar">
                                <div class="progress-bar-fill success" style="width: 91%"></div>
                            </div>
                        </div>
                        <div class="progress-item">
                            <div class="progress-label">NIST Cybersecurity Framework</div>
                            <div class="progress-value">88%</div>
                            <div class="progress-bar">
                                <div class="progress-bar-fill success" style="width: 88%"></div>
                            </div>
                        </div>
                        <div class="progress-item">
                            <div class="progress-label">GDPR Compliance</div>
                            <div class="progress-value">94%</div>
                            <div class="progress-bar">
                                <div class="progress-bar-fill success" style="width: 94%"></div>
                            </div>
                        </div>
                        <div class="progress-item">
                            <div class="progress-label">HIPAA (Healthcare Orgs)</div>
                            <div class="progress-value">83%</div>
                            <div class="progress-bar">
                                <div class="progress-bar-fill warning" style="width: 83%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- User Management & Access Control -->
        <div class="widget">
            <div class="widget-header">
                <h3 class="widget-title">User Management</h3>
                <button class="widget-action" onclick="window.dashboardManager.addNewOrganization()">
                    <span>‚ûï</span>
                </button>
            </div>
            <div class="widget-content">
                <div id="user-management-summary">
                    <div class="grid grid-cols-2 gap-4 mb-4">
                        <div class="text-center">
                            <div class="metric-value info" id="active-users">1,247</div>
                            <div class="metric-label">Active Users</div>
                        </div>
                        <div class="text-center">
                            <div class="metric-value warning" id="pending-invites">23</div>
                            <div class="metric-label">Pending Invites</div>
                        </div>
                    </div>
                    <div class="space-y-2">
                        <div class="flex justify-between text-sm">
                            <span>Site Admins</span>
                            <span class="font-semibold">5</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span>Business Admins</span>
                            <span class="font-semibold">34</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span>Individual Users</span>
                            <span class="font-semibold">1,208</span>
                        </div>
                        <div class="border-t pt-2 mt-3">
                            <div class="flex justify-between text-sm">
                                <span>Failed Logins (24h)</span>
                                <span class="text-red-600 font-semibold">12</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="widget-footer">
                <a href="#" onclick="window.dashboardManager.manageUsers()" class="text-primary">Manage users & permissions ‚Üí</a>
            </div>
        </div>

        <!-- API & System Health -->
        <div class="widget">
            <div class="widget-header">
                <h3 class="widget-title">System Health</h3>
                <div class="flex items-center gap-2">
                    <span class="status-dot green"></span>
                    <span class="text-sm">All Systems Operational</span>
                </div>
            </div>
            <div class="widget-content">
                <div id="system-health-metrics">
                    <div class="space-y-4">
                        <div>
                            <div class="flex justify-between text-sm mb-1">
                                <span>API Response Time</span>
                                <span class="text-green-600">245ms</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-bar-fill success" style="width: 85%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-sm mb-1">
                                <span>Database Performance</span>
                                <span class="text-green-600">98.7%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-bar-fill success" style="width: 98.7%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-sm mb-1">
                                <span>Storage Utilization</span>
                                <span class="text-yellow-600">67%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-bar-fill warning" style="width: 67%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-sm mb-1">
                                <span>Backup Success Rate</span>
                                <span class="text-green-600">100%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-bar-fill success" style="width: 100%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Revenue & Business Metrics -->
        <div class="widget chart-widget">
            <div class="widget-header">
                <h3 class="widget-title">Business Metrics</h3>
                <button class="widget-action" onclick="window.dashboardManager.showBusinessAnalytics()">
                    <span>üìä</span>
                </button>
            </div>
            <div class="widget-content">
                <div class="chart-container">
                    <canvas id="business-metrics-chart"></canvas>
                </div>
                <div class="grid grid-cols-2 gap-4 mt-4">
                    <div class="text-center">
                        <div class="metric-value success">$247K</div>
                        <div class="metric-label">Monthly Revenue</div>
                        <div class="metric-change positive">‚Üó +12%</div>
                    </div>
                    <div class="text-center">
                        <div class="metric-value info">156</div>
                        <div class="metric-label">New Customers</div>
                        <div class="metric-change positive">‚Üó +8%</div>
                    </div>
                </div>
            </div>
        </div>

    </div>

</div>

<!-- Additional Styles for Admin Dashboard -->
<style>
.grid-cols-6 {
    grid-template-columns: repeat(6, minmax(0, 1fr));
}

.border {
    border: 1px solid var(--border-color);
}

.text-red-600 {
    color: var(--danger-color);
}

.text-yellow-600 {
    color: var(--warning-color);
}

.text-green-600 {
    color: var(--success-color);
}

.mb-1 {
    margin-bottom: 0.25rem;
}

.mt-3 {
    margin-top: 0.75rem;
}

@media (max-width: 1200px) {
    .grid-cols-6 {
        grid-template-columns: repeat(3, minmax(0, 1fr));
    }
}

@media (max-width: 768px) {
    .grid-cols-6 {
        grid-template-columns: repeat(2, minmax(0, 1fr));
    }
}

@media (max-width: 480px) {
    .grid-cols-6 {
        grid-template-columns: repeat(1, minmax(0, 1fr));
    }
}
</style>
